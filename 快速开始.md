# 🚀 快速开始指南

## Windows 用户（推荐方案）

### 方案一：使用 WSL2（推荐）

1. **安装 WSL2**
   ```powershell
   # 在 PowerShell（管理员）中运行
   wsl --install
   # 重启电脑
   ```

2. **在 WSL2 中安装依赖**
   ```bash
   # 打开 WSL2 终端
   sudo apt update
   sudo apt install -y python3-pip git zip unzip openjdk-11-jdk
   
   # 安装 buildozer
   pip3 install --upgrade buildozer cython
   ```

3. **安装 Android SDK**
   ```bash
   # 下载 Android commandlinetools
   cd ~
   wget https://dl.google.com/android/repository/commandlinetools-linux-9477386_latest.zip
   unzip commandlinetools-linux-9477386_latest.zip
   mkdir -p Android/Sdk/cmdline-tools
   mv cmdline-tools Android/Sdk/cmdline-tools/latest
   
   # 设置环境变量
   echo 'export ANDROID_HOME=$HOME/Android/Sdk' >> ~/.bashrc
   echo 'export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin' >> ~/.bashrc
   source ~/.bashrc
   
   # 安装必要的 Android 组件
   sdkmanager "platform-tools" "platforms;android-31" "build-tools;31.0.0" "ndk;23.1.7779620"
   ```

4. **复制项目到 WSL**
   ```bash
   # 在 WSL 中
   cp -r /mnt/e/Desktop/ORC ~/PaddleOCR-Android
   cd ~/PaddleOCR-Android
   ```

5. **构建 APK**
   ```bash
   buildozer android debug
   ```

### 方案二：使用云构建服务

如果本地构建困难，可以使用：
- GitHub Actions
- GitLab CI
- Google Colab

### 方案三：使用虚拟机

1. 安装 VirtualBox 或 VMware
2. 安装 Ubuntu 20.04+ 虚拟机
3. 在虚拟机中按 Linux 步骤操作

---

## Linux 用户

### Ubuntu/Debian

```bash
# 1. 安装系统依赖
sudo apt update
sudo apt install -y python3-pip python3-dev build-essential \
    git zip unzip openjdk-11-jdk autoconf libtool \
    pkg-config zlib1g-dev libncurses5-dev libncursesw5-dev \
    libtinfo5 cmake libffi-dev libssl-dev

# 2. 安装 buildozer
pip3 install --upgrade buildozer cython

# 3. 安装 Android SDK (使用 Android Studio 或 sdkmanager)
# 下载 Android Studio 或 commandlinetools
# 设置 ANDROID_HOME 环境变量

# 4. 构建 APK
cd /path/to/project
buildozer android debug
```

---

## macOS 用户

```bash
# 1. 安装 Homebrew
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 2. 安装依赖
brew install python3 git
brew install openjdk@11

# 3. 安装 buildozer
pip3 install --upgrade buildozer cython

# 4. 安装 Android SDK
# 下载并安装 Android Studio
# 或使用 sdkmanager

# 5. 构建 APK
cd /path/to/project
buildozer android debug
```

---

## 🎯 构建步骤（通用）

### 1. 准备环境

确保已安装：
- ✅ Python 3.8+
- ✅ Java JDK 11+
- ✅ Android SDK (API 31)
- ✅ Android NDK (23b)
- ✅ Buildozer

### 2. 配置环境变量

```bash
export ANDROID_HOME=$HOME/Android/Sdk
export ANDROID_NDK_HOME=$ANDROID_HOME/ndk/23.1.7779620
export PATH=$PATH:$ANDROID_HOME/cmdline-tools/latest/bin:$ANDROID_HOME/platform-tools
```

### 3. 验证安装

```bash
# 检查 Python
python3 --version

# 检查 Java
java -version

# 检查 Buildozer
buildozer --version

# 检查 Android SDK
sdkmanager --list
```

### 4. 构建 APK

```bash
# 进入项目目录
cd PaddleOCR-Android

# 首次构建（时间较长，约 30-60 分钟）
buildozer android debug

# 后续构建（约 5-10 分钟）
buildozer android debug
```

### 5. 安装到手机

```bash
# 连接手机，启用 USB 调试

# 安装 APK
adb install bin/paddleocr-1.0.0-arm64-v8a-debug.apk

# 或直接部署运行
buildozer android deploy run
```

---

## ⚡ 常见问题

### Q1: 构建时间太长？
**A**: 首次构建需要下载依赖（1-2GB），后续构建会快很多。

### Q2: 构建失败？
**A**: 尝试清理缓存：
```bash
buildozer android clean
rm -rf .buildozer
buildozer android debug
```

### Q3: 找不到 Android SDK？
**A**: 确保设置了 ANDROID_HOME 环境变量，并安装了必要组件。

### Q4: 权限错误？
**A**: 
```bash
sudo chmod -R 755 ~/.buildozer
```

### Q5: Windows 上无法构建？
**A**: Buildozer 不支持 Windows，必须使用 WSL2 或 Linux 虚拟机。

---

## 📱 测试应用

### 在模拟器中测试

```bash
# 启动 Android 模拟器
emulator -avd Pixel_5_API_31

# 安装应用
adb install bin/paddleocr-1.0.0-arm64-v8a-debug.apk
```

### 在真机上测试

1. 启用开发者选项
   - 设置 → 关于手机 → 连续点击"版本号"7次
   
2. 启用 USB 调试
   - 设置 → 开发者选项 → USB 调试

3. 连接手机并安装
   ```bash
   adb devices
   adb install bin/paddleocr-1.0.0-arm64-v8a-debug.apk
   ```

---

## 🎉 完成！

APK 文件位置：`bin/paddleocr-1.0.0-arm64-v8a-debug.apk`

现在可以：
1. 将 APK 复制到手机安装
2. 通过 adb 直接安装
3. 上传到应用商店

---

## 📚 更多资源

- [Kivy 文档](https://kivy.org/doc/stable/)
- [Buildozer 文档](https://buildozer.readthedocs.io/)
- [PaddleOCR 文档](https://github.com/PaddlePaddle/PaddleOCR)
- [Android 开发文档](https://developer.android.com/)

