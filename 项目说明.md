# PaddleOCR Android 版本 - 项目说明

## 📌 项目概述

本项目将原有的 PaddleOCR 桌面应用（Tkinter）转换为 Android 移动应用，使用 Kivy 框架和 Buildozer 工具实现跨平台打包。

## 📂 项目结构

```
PaddleOCR-Android/
│
├── 核心文件
│   ├── main.py                      # Android 应用主程序（Kivy）
│   ├── paddle_ocr.py                # 原桌面版程序（保留）
│   ├── buildozer.spec               # APK 构建配置
│   └── requirements.txt             # Python 依赖列表
│
├── 辅助脚本
│   ├── setup_wsl.sh                 # WSL 环境自动配置（Linux）
│   ├── build.sh                     # 一键构建脚本（Linux）
│   ├── setup_windows.bat            # Windows 配置向导
│   └── test_kivy.py                 # Kivy 测试程序
│
├── 文档
│   ├── README_Android.md            # 详细技术文档（英文）
│   ├── 快速开始.md                  # 快速入门指南
│   ├── 简易说明.txt                 # 最简单的说明
│   ├── 使用说明-GitHub构建.md       # GitHub Actions 云构建教程
│   └── 项目说明.md                  # 本文件
│
├── GitHub Actions
│   └── .github/workflows/
│       └── build-android.yml        # 自动构建配置
│
└── 其他
    └── .gitignore                   # Git 忽略文件配置
```

## 🎯 功能对比

### 原桌面版（paddle_ocr.py）
- ✅ Tkinter GUI
- ✅ 文件对话框选择图片
- ✅ PaddleOCR 识别
- ✅ 结果显示和复制
- ❌ 仅支持 Windows/Linux/Mac 桌面
- ❌ 不支持移动设备

### Android 版（main.py）
- ✅ Kivy GUI（移动端优化）
- ✅ **相机拍照功能** ⭐
- ✅ **相册选择图片** ⭐
- ✅ PaddleOCR 识别（相同引擎）
- ✅ 结果显示和复制
- ✅ **Android 剪贴板支持** ⭐
- ✅ **触摸优化界面** ⭐
- ✅ **运行时权限管理** ⭐
- ✅ 支持 Android 5.0+
- ✅ 支持 ARM64 和 ARMv7 架构

## 🔧 技术栈

### 前端框架
- **Kivy 2.2.1**: Python 跨平台 GUI 框架
  - 支持触摸操作
  - 原生 Android 支持
  - 丰富的 UI 组件

### OCR 引擎
- **PaddleOCR 2.7.0.3**: 百度开源 OCR 引擎
  - 中文识别准确率 97%+
  - 支持多种语言
  - 轻量级模型（paddlepaddle-tiny）

### 构建工具
- **Buildozer**: Python for Android 打包工具
  - 自动处理依赖
  - 支持多架构
  - 自动生成 APK

### 其他依赖
- **Pillow**: 图像处理
- **OpenCV**: 计算机视觉（PaddleOCR 依赖）
- **NumPy**: 数值计算

## 🚀 构建方式

### 方式一：本地构建（Linux/WSL）
**适合**: 开发者、需要自定义的用户

**优点**:
- 完全控制构建过程
- 可以自定义配置
- 构建速度快（有缓存）

**缺点**:
- 需要配置环境
- Windows 用户需要 WSL
- 占用磁盘空间（约 10GB）

**步骤**:
1. 运行 `setup_wsl.sh`（自动配置）
2. 运行 `build.sh`
3. 等待构建完成
4. 获取 `bin/*.apk`

### 方式二：GitHub Actions 云构建
**适合**: 普通用户、不想配置环境的用户

**优点**:
- 无需本地配置
- 完全自动化
- 支持任何操作系统
- 免费使用

**缺点**:
- 需要 GitHub 账号
- 构建时间稍长（网络因素）
- 依赖 GitHub 服务

**步骤**:
1. 上传代码到 GitHub
2. 自动触发构建
3. 下载构建好的 APK
4. 安装到手机

详见：`使用说明-GitHub构建.md`

### 方式三：虚拟机构建
**适合**: 有虚拟机经验的 Windows 用户

**步骤**:
1. 安装 VirtualBox/VMware
2. 安装 Ubuntu 虚拟机
3. 按 Linux 步骤构建

## 📱 应用特性

### 权限管理
应用需要以下 Android 权限：
- `CAMERA`: 拍照功能
- `READ_EXTERNAL_STORAGE`: 读取相册
- `WRITE_EXTERNAL_STORAGE`: 保存图片
- `INTERNET`: 首次下载模型

应用会在需要时自动请求权限。

### 存储结构
```
/data/data/com.ocrapp.paddleocr/
├── files/
│   └── .paddleocr/              # OCR 模型缓存
│       ├── det/                 # 检测模型
│       ├── rec/                 # 识别模型
│       └── cls/                 # 方向分类模型
└── cache/
    └── ocr_photo.png            # 拍照临时文件
```

### 性能优化
- **轻量级模型**: 使用 paddlepaddle-tiny
- **懒加载**: OCR 引擎按需初始化
- **图片压缩**: 自动缩放大图片
- **单例模式**: 引擎复用，避免重复加载

### 离线使用
- 首次运行需要联网下载模型（约 20MB）
- 模型下载后永久缓存
- 后续可完全离线使用

## 🎨 UI 设计

### 布局结构
```
┌─────────────────────────────┐
│     标题栏（蓝色背景）      │ 10%
├─────────────────────────────┤
│  [拍照] [相册] [识别] [复制]│ 15%
├─────────────────────────────┤
│                             │
│      图片预览区域           │ 35%
│                             │
├─────────────────────────────┤
│                             │
│      识别结果区域           │ 35%
│    （可滚动文本框）         │
│                             │
├─────────────────────────────┤
│      状态栏（底部）         │ 5%
└─────────────────────────────┘
```

### 颜色方案
- 主色调: Material Design Blue (#1976D2)
- 按钮配色:
  - 拍照: 绿色 (#4CAF50)
  - 相册: 蓝色 (#2196F3)
  - 识别: 橙色 (#FF9800)
  - 复制: 浅蓝 (#03A9F4)

### 交互设计
- 大按钮（触摸友好）
- 清晰的视觉反馈
- Emoji 图标增强识别度
- 实时状态提示

## 🔒 安全与隐私

### 数据安全
- ✅ 所有识别在本地完成
- ✅ 不上传任何数据到服务器
- ✅ 不收集用户信息
- ✅ 临时文件自动清理

### 权限最小化
- 仅请求必需权限
- 运行时权限检查
- 用户可随时撤销权限

## 📊 APK 信息

### 构建配置
```
应用名称: PaddleOCR
包名: com.ocrapp.paddleocr
版本: 1.0.0
最低 Android: 5.0 (API 21)
目标 Android: 12 (API 31)
架构: arm64-v8a, armeabi-v7a
```

### APK 大小
- 未压缩: 约 80-120MB
- 压缩后: 约 40-60MB

大小包含：
- Kivy 框架
- PaddleOCR 库
- PaddlePaddle 运行时
- OpenCV 库
- Python 运行时

## 🔄 更新与维护

### 版本更新
修改 `buildozer.spec` 中的版本号：
```ini
version = 1.1.0
```

### 添加新功能
1. 修改 `main.py` 添加功能
2. 更新 `requirements.txt`（如需新依赖）
3. 测试本地运行：`python main.py`
4. 构建新 APK：`buildozer android debug`

### 问题排查
```bash
# 查看应用日志
buildozer android logcat | grep python

# 或使用 adb
adb logcat | grep python

# 清理缓存重新构建
buildozer android clean
rm -rf .buildozer
buildozer android debug
```

## 📈 后续改进

### 短期目标
- [ ] 添加批量识别功能
- [ ] 支持识别结果导出（文本文件）
- [ ] 添加历史记录功能
- [ ] 优化 UI 动画效果

### 中期目标
- [ ] 支持更多语言识别
- [ ] 添加文档矫正功能
- [ ] 实现表格识别
- [ ] 添加 OCR 结果编辑功能

### 长期目标
- [ ] iOS 版本
- [ ] 云同步功能
- [ ] AI 智能优化
- [ ] 发布到 Google Play

## 🤝 贡献指南

欢迎贡献代码！

### 开发流程
1. Fork 本仓库
2. 创建功能分支：`git checkout -b feature/new-feature`
3. 提交更改：`git commit -am 'Add new feature'`
4. 推送分支：`git push origin feature/new-feature`
5. 创建 Pull Request

### 代码规范
- Python 代码遵循 PEP 8
- 函数和类添加文档字符串
- 提交信息清晰明确

## 📄 许可证

本项目基于开源协议，依赖的主要项目：
- PaddleOCR: Apache License 2.0
- Kivy: MIT License
- PaddlePaddle: Apache License 2.0

## 📞 支持与反馈

如有问题或建议，请：
1. 查看文档（README_Android.md、快速开始.md）
2. 提交 GitHub Issue
3. 参考官方文档

## 🎉 致谢

感谢以下开源项目：
- [PaddleOCR](https://github.com/PaddlePaddle/PaddleOCR)
- [Kivy](https://github.com/kivy/kivy)
- [Buildozer](https://github.com/kivy/buildozer)
- [PaddlePaddle](https://github.com/PaddlePaddle/Paddle)

---

**最后更新**: 2025-10-31

**项目状态**: ✅ 可用

**维护者**: 欢迎贡献！

